"use strict";angular.module("arayDeWeather",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(e,a){e.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}),a.otherwise("/")}]),angular.module("arayDeWeather").controller("NavbarCtrl",["$scope",function(e){e.date=new Date}]),angular.module("arayDeWeather").controller("MainCtrl",["$scope","$http","$window","WeatherIcon",function(e,a,n,i){function o(){n.navigator.geolocation?(console.log("geolocation"),n.navigator.geolocation.getCurrentPosition(r)):console.log("geolocation error")}function r(n){var o=n.coords.latitude,r=n.coords.longitude;console.log("lat:"+o),console.log("lon:"+r),a.jsonp("http://api.map.baidu.com/geocoder/v2/?ak=izzcWKDNO77b3VodC1ipezPh&callback=JSON_CALLBACK&location="+o+","+r+"&output=json&pois=1").success(function(a){console.log(a),e.location=a.result}),a({url:"http://api.openweathermap.org/data/2.5/weather?lat="+o+"&lon="+r+"&lang=zh_cn&APPID=ed158d368307ef2644fe349ffa6a50d4"}).success(function(a){if(200===a.cod){switch(console.log(a),e.weather=a,!0){case a.wind.deg>=0&&a.wind.deg<22.5:a.wind.deg="北";break;case a.wind.deg>=22.5&&a.wind.deg<67.5:a.wind.deg="东北";break;case a.wind.deg>=67.5&&a.wind.deg<112.5:a.wind.deg="东";break;case a.wind.deg>=112.5&&a.wind.deg<157.5:a.wind.deg="东南";break;case a.wind.deg>=157.5&&a.wind.deg<202.5:a.wind.deg="南";break;case a.wind.deg>=202.5&&a.wind.deg<247.5:a.wind.deg="西南";break;case a.wind.deg>=247.5&&a.wind.deg<292.5:a.wind.deg="西";break;case a.wind.deg>=292.5&&a.wind.deg<337.5:a.wind.deg="西北";break;case a.wind.deg>=337.5&&a.wind.deg<=360:a.wind.deg="北"}a.weather[0].id=i(a.weather[0].id),e.showloading=!1}}),a({url:"http://api.openweathermap.org/data/2.5/forecast?lat="+o+"&lon="+r+"&lang=zh_cn&APPID=ed158d368307ef2644fe349ffa6a50d4"}).success(function(a){"200"===a.cod&&(console.log(a),e.weather3Hour=a)}),a({url:"http://api.openweathermap.org/data/2.5/forecast/daily?lat="+o+"&lon="+r+"&lang=zh_cn&cnt=10&mode=json&APPID=ed158d368307ef2644fe349ffa6a50d4"}).success(function(a){"200"===a.cod&&(console.log(a),e.weather10Day=a)})}e.showloading=!0,o()}]),angular.module("arayDeWeather").factory("WeatherIcon",function(){return function(e){var a={200:"wi-thunderstorm",201:"wi-thunderstorm",202:"wi-thunderstorm",210:"wi-thunderstorm",211:"wi-thunderstorm",212:"wi-thunderstorm",221:"wi-thunderstorm",230:"wi-thunderstorm",231:"wi-thunderstorm",232:"wi-thunderstorm",300:"wi-showers",301:"wi-showers",302:"wi-showers",310:"wi-showers",311:"wi-showers",312:"wi-showers",313:"wi-showers",314:"wi-showers",321:"wi-showers",500:"wi-rain",501:"wi-rain",502:"wi-rain",503:"wi-rain",504:"wi-rain",511:"wi-rain",520:"wi-rain",521:"wi-rain",522:"wi-rain",531:"wi-rain",600:"wi-snow",601:"wi-snow",602:"wi-snow",611:"wi-snow",612:"wi-snow",615:"wi-snow",616:"wi-snow",620:"wi-snow",621:"wi-snow",622:"wi-snow",701:"wi-smoke",711:"wi-smoke",721:"wi-day-haze",731:"wi-dust",741:"wi-fog",751:"wi-smoke",761:"wi-dust",762:"wi-smoke",771:"wi-smoke",781:"wi-tornado",800:"wi-day-sunny",801:"wi-cloud",802:"wi-cloudy",803:"wi-cloudy-gusts",804:"wi-day-cloudy",900:"wi-tornado",901:"wi-thunderstorm",902:"wi-hurricane",903:"wi-snowflake-cold",904:"wi-hot",905:"wi-windy",906:"wi-hail",951:"wi-day-sunny",952:"wi-windy",953:"wi-windy",954:"wi-windy",955:"wi-wind",956:"wi-wind",957:"wi-wind",958:"wi-strong-wind",959:"wi-strong-wind",960:"wi-thunderstorm",961:"wi-thunderstorm",962:"wi-hurricane"};return a[e]||"wi-refresh"}}),angular.module("arayDeWeather").factory("MTCommonStorage",["$window",function(e){return{SetLocalStorage:function(a,n,i){var o=new Date,r=o.valueOf(),t=i.substring(0,i.length-1);if(/^[0-9]*$/.test(t)){switch(i.substr(-1)){case"d":r+=24*t*60*60*1e3;break;case"h":r+=60*t*60*1e3;break;case"m":r+=60*t*1e3;break;case"s":r+=1e3*t;break;default:return console.log("时间单位必须为D,H,M,S"),!1}var r=new Date(r),s={Value:n,DeadTime:r,SaveTime:o};e.localStorage.setItem("USER",angular.toJson(s))}else console.log("时间格式错误")},GetLocalStorage:function(a){var n=angular.fromJson(e.localStorage.getItem(a));if(n){var i=new Date,o=new Date(n.DeadTime);if(o>i)return n.Value;e.localStorage.removeItem(a)}}}}]),angular.module("arayDeWeather").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="container"><div class="loading" ng-if="showloading">loading...</div><div class="weather" ng-if="!showloading"><p>{{location.addressComponent.city}}</p><p>{{weather.weather[0].description}}</p><p><i class="wi {{weather.weather[0].id}}"></i></p><p>当前温度{{weather.main.temp - 273.15 | number:0}}<i class="wi wi-degrees"></i></p><p>风速{{weather.wind.speed}}mps</p><p>风向{{weather.wind.deg}}风</p><p>湿度{{weather.main.humidity}}%</p><p>气压{{weather.main.pressure | number:0}}hPa</p></div></div>'),e.put("app/components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse" ng-controller="NavbarCtrl"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="https://github.com/Swiip/generator-gulp-angular"><span class="glyphicon glyphicon-home"></span> Gulp Angular</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li class="active"><a ng-href="#">Home</a></li><li><a ng-href="#">About</a></li><li><a ng-href="#">Contact</a></li></ul><ul class="nav navbar-nav navbar-right"><li>Current date: {{ date | date:\'yyyy-MM-dd\' }}</li></ul></div></div></nav>')}]);